package com.parralel;

import java.util.ArrayList;
import java.util.List;

public class Buyer extends Thread {
    private List<String> products;
    private String nameBuyer;

    public Buyer(String name) {
        this.nameBuyer = name;
        this.products = putProducts();

    }

    public String getNameBuyer() {
        return nameBuyer;
    }

    @Override
    public void run() {
        products.forEach(s -> System.out.println(s +" - "+ getNameBuyer()));
    }

    private static List<String> putProducts() {
        List<String> productsBuyers = new ArrayList<>();
        int number = (int) (Math.random() * 10+1);
        for (int i = 0; i < number; i++) {
            int sizeProducts = Products.getProducts().size();
            int n = (int)(Math.random() * (sizeProducts));
            productsBuyers.add(Products.getProducts().get(n));
        }
        return productsBuyers;
    }
}





package com.parralel;

import java.util.ArrayList;
import java.util.List;

public class Products {
    private static List<String> listProducts = new ArrayList<>();

    static {
        listProducts.add("курица");
        listProducts.add("молоко");
        listProducts.add("яйца");
        listProducts.add("туалетная бумага");
        listProducts.add("сметана");
        listProducts.add("творог");
        listProducts.add("мыло");
        listProducts.add("лук");
        listProducts.add("гречка");
        listProducts.add("лимон");
        listProducts.add("маска");
        listProducts.add("дизинфекция");
        listProducts.add("хлеб");
        listProducts.add("пиво");
    }

    public static List<String> getProducts() {
        return listProducts;
    }
}




package com.parralel;

import java.util.List;

public class Cashbox {
    private String number;
    private List<Buyer> buyers;

    public Cashbox(String number, List<Buyer> buyers) {
        this.number = number;
        this.buyers = buyers;
    }

    synchronized void showProducts() {
        buyers.forEach(s -> {
            s.start();
            try {
                s.join();
            } catch (InterruptedException e) {
                System.out.println("не вышло");
            }
        });
    }
}




package com.parralel;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        List<Buyer> buyers = new ArrayList<>();
        buyers.add(new Buyer("покупатель 1"));
        buyers.add(new Buyer("покупатель 2"));
        buyers.add(new Buyer("покупатель 3"));
        buyers.add(new Buyer("покупатель 4"));
        Cashbox cashbox1 = new Cashbox("касса 1", buyers);
        cashbox1.showProducts();

    }
}
